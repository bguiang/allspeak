(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(10),i=n.n(c),r=(n(110),n.p,n(111),n(94)),l=n(93),o=n(264),d=n(90),u=n.n(d),b=n(91),j=n.n(b),m=n(265),h=n(252),f=Object(h.a)((function(e){return{container:{padding:0},background:{background:"#1f1A24"},navbar:{paddingTop:50,paddingBottom:20},navbarTitle:{margin:0,padding:0,color:"white"},mainContainer:{flex:1,display:"flex"},main:{flex:1,display:"flex",height:500},chat:{flex:1,display:"flex",flexDirection:"column"},chatEntry:{display:"flex",flexDirection:"row"},chatArea:{flex:1,overflow:"auto",flexDirection:"column-reverse"},chatField:{flex:1},users:{paddingLeft:5,paddingRight:5,width:270,display:"flex",flexDirection:"column",overflow:"auto"},userList:{flex:1},messageContainer:{display:"flex"},messageSenderIconContainer:{display:"flex",justifyContent:"center",alignItems:"center",padding:5},messageSenderIcon:{lineHeight:0,width:0,padding:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",fontSize:"1.2em"},messageContent:{flex:1,padding:5},messageIdentifier:{display:"flex"},messageSender:{fontWeight:"bold"},messageTimeStamp:{color:"#808080",marginLeft:5,fontStyle:"italic"},user:{display:"flex",justifyContent:"center",alignItems:"center"},userIcon:{lineHeight:0,width:0,padding:20,borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",fontSize:"1.2em"},username:{flex:1,fontWeight:"bold",padding:5}}})),g=n(255),p=n(5),O=function(){var e=f();return Object(p.jsx)(g.a,{component:"main",maxWidth:"md",classes:e.mainContainer,children:Object(p.jsx)("div",{className:e.navbar,children:Object(p.jsx)("h1",{className:e.navbarTitle,children:"AllSpeak"})})})},x=n(95),v=n(22),y=n.n(v),S=n(56),N=n(14),C=n(257),w=n(258),k=n(268),T=n(262),I=n(261),L=n(270),E=n(266),A=n(271),D=n(263),W=n(42),U=n.n(W),F=n(88),H=n.n(F),R=n(267),J=n(89),P=n.n(J),B=function(){var e=f(),t=Object(a.useState)(""),n=Object(N.a)(t,2),s=n[0],c=n[1],i=Object(a.useState)(""),r=Object(N.a)(i,2),l=(r[0],r[1],Object(a.useState)("en")),o=Object(N.a)(l,2),d=o[0],u=o[1],b=Object(a.useState)(""),j=Object(N.a)(b,2),m=j[0],h=j[1],O=Object(a.useState)(null),v=Object(N.a)(O,2),W=v[0],F=v[1],J=Object(a.useState)(""),B=Object(N.a)(J,2),M=B[0],z=B[1],V=Object(a.useState)([]),q=Object(N.a)(V,2),K=q[0],_=q[1],G=Object(a.useState)([]),Q=Object(N.a)(G,2),X=Q[0],Y=Q[1],Z=Object(a.useState)(""),$=Object(N.a)(Z,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),ae=Object(N.a)(ne,2),se=ae[0],ce=ae[1],ie=Object(a.useState)({}),re=Object(N.a)(ie,2),le=re[0],oe=re[1],de=Object(a.useState)({}),ue=Object(N.a)(de,2),be=ue[0],je=ue[1],me=Object(a.useState)(!1),he=Object(N.a)(me,2),fe=he[0],ge=he[1],pe=function(){var e=Object(S.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("getting languiages..."),e.next=4,H.a.get("/languages");case 4:t=e.sent,console.log("Languages"),console.log(t.data),_(t.data),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){pe(),je(new R.a({brokerURL:"wss://allspeak.bernardguiang.com/allspeak",connectHeaders:{},debug:function(e){console.log("STOMP_CLIENT: "+e)},reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3}))}),[]);var Oe=function(){var e=!0;return z(""),U.a.isEmpty(s)?(z("Please enter a username"),e=!1):U.a.isAlphanumeric(s,"en-US",{ignore:" "})&&U.a.isLength(s,{min:1,max:20})&&U.a.isAlphanumeric(s[0])||(z("Username must be 1-20 characters long and contain only letters, numbers, and spaces and start with a letter or number"),e=!1),e},xe=function(e){var t=JSON.parse(e.body);console.log("Message Received"),console.log(t),Y((function(e){return[].concat(Object(x.a)(e),[t])}))},ve=function(e){var t=JSON.parse(e.body);console.log("User List Update Received"),console.log(t),ce(t);for(var n={},a=0;a<t.length;a++)n[t[a].username]=t[a].color;oe(n)};be.beforeConnect=function(e){console.log("Client starting to connect...")},be.onConnect=function(e){console.log("Client connected");var t=be.subscribe("/topic/"+d,xe);be.subscribe("/topic/public",xe),be.subscribe("/topic/users",ve);F(t),be.publish({destination:"/app/chat.newUser",body:JSON.stringify({sender:s,type:"CONNECT"})})},be.onStompError=function(e){console.log("Broker reported error: "+e.headers.message),console.log("Additional details: "+e.body)};var ye=function(){var e=Object(S.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),h(""),Oe()&&(be.activate(),ge(!0));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=Object(a.useRef)(null);Object(a.useEffect)((function(){if(Se&&Se.current){var e=Se.current;e.scroll({top:e.scrollHeight,left:0,behavior:"smooth"})}}),[Se,X]);var Ne=X.map((function(t,n){return Object(p.jsxs)("div",{style:{padding:5},children:["CONNECT"===t.type||"DISCONNECT"===t.type?Object(p.jsx)("div",{style:{fontStyle:"italic"},children:t.content}):null,"CHAT"===t.type?Object(p.jsxs)("div",{className:e.messageContainer,children:[Object(p.jsx)("div",{className:e.messageSenderIconContainer,children:Object(p.jsx)("div",{className:e.messageSenderIcon,style:{backgroundColor:le[t.sender]},children:t.sender.charAt(0)})}),Object(p.jsxs)("div",{className:e.messageContent,children:[Object(p.jsxs)("div",{className:e.messageIdentifier,children:[Object(p.jsx)("div",{className:e.messageSender,children:t.sender}),Object(p.jsx)("div",{className:e.messageTimeStamp,children:t.time})]}),Object(p.jsx)("div",{children:t.content})]})]}):null]},n)})),Ce=se.map((function(t,n){return Object(p.jsx)("div",{style:{padding:5},children:Object(p.jsxs)("div",{className:e.user,children:[Object(p.jsx)("div",{className:e.userIcon,style:{backgroundColor:le[t.username]},children:t.username.charAt(0)}),Object(p.jsx)("div",{className:e.username,children:t.username})]})},n)}));return W?Object(p.jsx)(g.a,{component:"main",maxWidth:"md",classes:e.mainContainer,children:Object(p.jsx)(C.a,{classes:e.mainContainer,children:Object(p.jsxs)(w.a,{className:e.main,children:[Object(p.jsxs)("div",{className:e.chat,children:[Object(p.jsx)("div",{ref:Se,className:e.chatArea,children:Ne}),Object(p.jsx)("div",{children:Object(p.jsxs)("form",{className:e.chatEntry,onSubmit:function(e){if(e.preventDefault(),ee){var t={sender:s,content:ee,type:"CHAT",time:P()().calendar()};be.publish({destination:"/app/chat.send",body:JSON.stringify(t)}),te("")}},children:[Object(p.jsx)(k.a,{id:"filled-multiline-static",className:e.chatField,label:"Message",multiline:!0,rows:3,defaultValue:"",value:ee,variant:"filled",onChange:function(e){te(e.target.value)}}),Object(p.jsx)(T.a,{type:"submit",variant:"contained",color:"primary",children:"Submit"})]})})]}),Object(p.jsxs)("div",{className:e.users,children:[Object(p.jsx)("h4",{children:"Users"}),Object(p.jsx)("div",{className:e.userList,children:Ce})]})]})})}):Object(p.jsx)(g.a,{component:"main",maxWidth:"xs",children:Object(p.jsxs)("div",{className:e.paper,children:[Object(p.jsx)("h2",{className:e.cartHeaderTitle,children:"Login"}),Object(p.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(p.jsx)(k.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username1",label:"Username",name:"username",onChange:function(e){c(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&console.log("Enter key pressed")},autoFocus:!0,helperText:M,error:!!M}),K.length>0?Object(p.jsxs)(I.a,{fullWidth:!0,children:[Object(p.jsx)(L.a,{id:"demo-simple-select-label",children:"Language"}),Object(p.jsx)(E.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:d,label:"Language",onChange:function(e){u(e.target.value)},children:K.map((function(e,t){return Object(p.jsx)(A.a,{value:e.code,children:e.name},e.code)}))}),Object(p.jsx)(T.a,{onClick:ye,fullWidth:!0,variant:"contained",color:"primary",className:e.submit,children:"Submit"}),fe?Object(p.jsx)(D.a,{variant:"subtitle2",className:e.error,children:"The server is full. Please try again later"}):null,m?Object(p.jsx)(D.a,{variant:"subtitle2",className:e.error,children:m}):null]}):Object(p.jsx)(D.a,{variant:"subtitle2",className:e.error,children:"The server is full. Try again later"})]})]})})},M=Object(l.a)({palette:{type:"dark",primary:{main:u.a[500]},secondary:{main:j.a[500]}}});var z=function(){return Object(p.jsx)(r.a,{children:Object(p.jsx)("div",{style:{background:"#1f1A24",margin:0,padding:0},children:Object(p.jsxs)(o.a,{theme:M,children:[Object(p.jsx)(m.a,{}),Object(p.jsxs)("div",{style:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column"},children:[Object(p.jsx)(O,{}),Object(p.jsx)("div",{style:{flex:1,display:"flex"},children:Object(p.jsx)(B,{})})]})]})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,272)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),c(e),i(e)}))};i.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(z,{})}),document.getElementById("root")),V()}},[[221,1,2]]]);
//# sourceMappingURL=main.7f6a38fa.chunk.js.map